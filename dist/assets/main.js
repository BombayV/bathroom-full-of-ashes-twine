const r={Start:()=>{},MainMenu:()=>{}},l=s=>{const{name:e}=s.passage;r[e]&&r[e]()},u={Start:()=>{},MainMenu:()=>{}},g=s=>{const{name:e}=s.passage;u[e]&&u[e]()};class n{static getSugarCubeObject(){return typeof window<"u"?window.SugarCube||window.SugarCubeAPI:null}static isAvailable(){const e=this.getSugarCubeObject();return e!=null&&e.Engine!==null}static goToPassage(e){const t=this.getSugarCubeObject();return this.isAvailable()&&t?.Engine?(t.Engine.play(e),!0):(console.warn("SugarCube Engine not available"),!1)}static getCurrentPassage(){const e=this.getSugarCubeObject();return this.isAvailable()&&e?.State?.active?e.State.active.title:null}static setVariable(e,t){const a=this.getSugarCubeObject();return this.isAvailable()&&a?.State?.variables?(a.State.variables[e]=t,!0):(console.warn("SugarCube State not available"),!1)}static getVariable(e,t){const a=this.getSugarCubeObject();return this.isAvailable()&&a?.State?.variables?a.State.variables[e]??t:t}static hasVisited(e){const t=this.getSugarCubeObject();return this.isAvailable()&&t?.State&&t.State.history?t.State.history.some(a=>a.title===e):!1}static getVisitCount(e){const t=this.getSugarCubeObject();return this.isAvailable()&&t?.State&&t.State.history?t.State.history.filter(a=>a.title===e).length:0}static goBack(){const e=this.getSugarCubeObject();return this.isAvailable()&&e?.Engine?(e.Engine.backward(),!0):(console.warn("SugarCube Engine not available"),!1)}static restart(){const e=this.getSugarCubeObject();return this.isAvailable()&&e?.Engine?(e.Engine.restart(),!0):(console.warn("SugarCube Engine not available"),!1)}static whenReady(e,t=5e3){if(this.isAvailable()){e();return}const a=()=>{document.removeEventListener("sugarcube-ready",a),e()};document.addEventListener("sugarcube-ready",a),setTimeout(()=>{document.removeEventListener("sugarcube-ready",a),this.isAvailable()||console.warn("SugarCube did not become available within timeout")},t)}static getStoryInfo(){const e=this.getSugarCubeObject();return this.isAvailable()&&e?.Story?{title:e.Story.title,id:e.Story.id}:null}static passageExists(e){const t=this.getSugarCubeObject();return this.isAvailable()&&t?.Story?t.Story.has(e):!1}static getSugarCube(){return this.getSugarCubeObject()}}const d=(s,e)=>{setTimeout(()=>{const t=document.getElementById(e);t&&(t.classList.remove("opacity-0"),setTimeout(()=>{t.classList.add("opacity-0"),setTimeout(()=>{n.whenReady(()=>{n.goToPassage(s)})},6e3)},8e3))},500)},o=(s,e,t=0)=>{const a=s[t];if(t>=s.length){console.error("Could not load image from any path");return}const i=new Image;i.onload=()=>{e.src=a,console.log("Image loaded successfully from:",a)},i.onerror=()=>{console.log("Failed to load from:",a),o(s,e,t+1)},i.src=a},b=()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen().catch(s=>{console.error(`Error attempting to enable full-screen mode: ${s.message} (${s.name})`)})},m=()=>{setTimeout(()=>{const s=document.getElementById("background-image");s&&o(["assets/images/background.jpg","./assets/images/background.jpg","/assets/images/background.jpg"],s),document.getElementById("fullscreen-button")?.addEventListener("click",b)},50)},f=s=>{setTimeout(()=>{const e=document.getElementById("loading");e&&setTimeout(()=>{const t=e.querySelector("img"),a=e.querySelector("p");t&&t.classList.remove("opacity-0"),a&&a.classList.remove("opacity-0"),setTimeout(()=>{e&&(a&&a.classList.add("opacity-0"),t&&t.classList.add("opacity-0"),setTimeout(()=>{s&&s()},6e3))},6e3)},100)},100)},h=()=>{setTimeout(()=>{const s=document.getElementById("bathroom-image");s&&o(["assets/images/the_bathroom_full_of_ashes.png","./assets/images/the_bathroom_full_of_ashes.png","/assets/images/the_bathroom_full_of_ashes.png"],s),f(()=>{n.whenReady(()=>{n.goToPassage("MainMenu")})})},300)},c={Start:()=>{h()},MainMenu:()=>{m()},Day0:()=>{d("MainMenu","day-0")}},S=s=>{const{name:e}=s.passage;c[e]&&c[e]()};setTimeout(()=>{if(typeof window<"u"&&window.jQuery){const s=window.$;s(document).on(":passageend",g),s(document).on(":passageinit",l),s(document).on(":passagerender",S)}},0);
