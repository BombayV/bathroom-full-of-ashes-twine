const S={Start:()=>{},MainMenu:()=>{}},w=n=>{const{name:e}=n.passage;S[e]&&S[e]()},p={Start:()=>{},MainMenu:()=>{}},A=n=>{const{name:e}=n.passage;p[e]&&p[e]()};class u{static getSugarCubeObject(){return typeof window<"u"?window.SugarCube||window.SugarCubeAPI:null}static isAvailable(){const e=this.getSugarCubeObject();return e!=null&&e.Engine!==null}static goToPassage(e){const t=this.getSugarCubeObject();return this.isAvailable()&&t?.Engine?(t.Engine.play(e),!0):(console.warn("SugarCube Engine not available"),!1)}static getCurrentPassage(){const e=this.getSugarCubeObject();return this.isAvailable()&&e?.State?.active?e.State.active.title:null}static setVariable(e,t){const s=this.getSugarCubeObject();return this.isAvailable()&&s?.State?.variables?(s.State.variables[e]=t,!0):(console.warn("SugarCube State not available"),!1)}static getVariable(e,t){const s=this.getSugarCubeObject();return this.isAvailable()&&s?.State?.variables?s.State.variables[e]??t:t}static hasVisited(e){const t=this.getSugarCubeObject();return this.isAvailable()&&t?.State&&t.State.history?t.State.history.some(s=>s.title===e):!1}static getVisitCount(e){const t=this.getSugarCubeObject();return this.isAvailable()&&t?.State&&t.State.history?t.State.history.filter(s=>s.title===e).length:0}static goBack(){const e=this.getSugarCubeObject();return this.isAvailable()&&e?.Engine?(e.Engine.backward(),!0):(console.warn("SugarCube Engine not available"),!1)}static restart(){const e=this.getSugarCubeObject();return this.isAvailable()&&e?.Engine?(e.Engine.restart(),!0):(console.warn("SugarCube Engine not available"),!1)}static whenReady(e,t=5e3){if(this.isAvailable()){e();return}const s=()=>{document.removeEventListener("sugarcube-ready",s),e()};document.addEventListener("sugarcube-ready",s),setTimeout(()=>{document.removeEventListener("sugarcube-ready",s),this.isAvailable()||console.warn("SugarCube did not become available within timeout")},t)}static getStoryInfo(){const e=this.getSugarCubeObject();return this.isAvailable()&&e?.Story?{title:e.Story.title,id:e.Story.id}:null}static passageExists(e){const t=this.getSugarCubeObject();return this.isAvailable()&&t?.Story?t.Story.has(e):!1}static getSugarCube(){return this.getSugarCubeObject()}}const E=(n,e)=>{setTimeout(()=>{const t=document.getElementById(e);t&&(t.classList.remove("opacity-0"),setTimeout(()=>{t.classList.add("opacity-0"),setTimeout(()=>{u.whenReady(()=>{u.goToPassage(n)})},6e3)},8e3))},500)},m=(n,e,t=0)=>{const s=n[t];if(t>=n.length){console.error("Could not load image from any path");return}const a=new Image;a.onload=()=>{e.src=s,console.log("Image loaded successfully from:",s)},a.onerror=()=>{console.log("Failed to load from:",s),m(n,e,t+1)},a.src=s},L=()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen().catch(n=>{console.error(`Error attempting to enable full-screen mode: ${n.message} (${n.name})`)})},M=()=>{setTimeout(()=>{const n=document.getElementById("background-image");n&&m(["assets/images/background.jpg","./assets/images/background.jpg","/assets/images/background.jpg"],n),document.getElementById("fullscreen-button")?.addEventListener("click",L)},0)},j=n=>{setTimeout(()=>{const e=document.getElementById("loading");e&&setTimeout(()=>{const t=e.querySelector("img"),s=e.querySelector("p");t&&t.classList.remove("opacity-0"),s&&s.classList.remove("opacity-0"),setTimeout(()=>{e&&(s&&s.classList.add("opacity-0"),t&&t.classList.add("opacity-0"),setTimeout(()=>{n&&n()},6e3))},6e3)},100)},100)},O=()=>{setTimeout(()=>{const n=document.getElementById("bathroom-image");n&&m(["assets/images/the_bathroom_full_of_ashes.png","./assets/images/the_bathroom_full_of_ashes.png","/assets/images/the_bathroom_full_of_ashes.png"],n),j(()=>{u.whenReady(()=>{u.goToPassage("MainMenu")})})},100)},v={Start:()=>{O()},MainMenu:()=>{M()},Day0:()=>{E("KitchenDay0","day-0")},Day0ChangeScene:()=>{E("HouseDay0-0","day-0-change")}},I=n=>{const{name:e}=n.passage;v[e]&&v[e]()},_=n=>{const e=n.innerHTML,t=n.textContent||n.innerText||"";n.innerHTML="";const s=document.createElement("span");s.style.fontFamily="inherit",s.style.fontSize="inherit",s.style.lineHeight="inherit",s.style.color="inherit";const a=document.createElement("span");a.className="cursor",n.appendChild(s),n.appendChild(a);let l=0;const C=25,r=document.createElement("div");r.innerHTML=e,r.style.display="none",document.body.appendChild(r);const b=()=>{if(l<t.length){l++;const h=r.cloneNode(!0);let o=l;const f=i=>{if(o<=0)return!1;if(i.nodeType===Node.TEXT_NODE){const c=i.textContent||"";return o>=c.length?(o-=c.length,!0):(i.textContent=c.substring(0,o),o=0,!1)}else if(i.nodeType===Node.ELEMENT_NODE){const c=Array.from(i.childNodes);for(const y of c)if(!f(y)){const g=Array.from(i.childNodes),T=g.indexOf(y);for(let d=T+1;d<g.length;d++)i.removeChild(g[d]);break}return o>0}return!0};f(h),requestAnimationFrame(()=>{s.innerHTML=h.innerHTML}),setTimeout(b,C)}else requestAnimationFrame(()=>{s.innerHTML=e,a.style.animation="none"}),document.body.removeChild(r)};b()};window.setupTypingAnimation=_;setTimeout(()=>{if(typeof window<"u"&&window.jQuery){const n=window.$;n(document).on(":passageend",A),n(document).on(":passageinit",w),n(document).on(":passagerender",I)}},0);
