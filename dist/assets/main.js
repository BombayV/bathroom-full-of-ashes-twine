class c{static getSugarCubeObject(){return typeof window<"u"?window.SugarCube||window.SugarCubeAPI:null}static isAvailable(){const e=this.getSugarCubeObject();return e!=null&&e.Engine!==null}static goToPassage(e){const t=this.getSugarCubeObject();return this.isAvailable()&&t?.Engine?(t.Engine.play(e),!0):(console.warn("SugarCube Engine not available"),!1)}static getCurrentPassage(){const e=this.getSugarCubeObject();return this.isAvailable()&&e?.State?.active?e.State.active.title:null}static setVariable(e,t){const a=this.getSugarCubeObject();return this.isAvailable()&&a?.State?.variables?(a.State.variables[e]=t,!0):(console.warn("SugarCube State not available"),!1)}static getVariable(e,t){const a=this.getSugarCubeObject();return this.isAvailable()&&a?.State?.variables?a.State.variables[e]??t:t}static hasVisited(e){const t=this.getSugarCubeObject();return this.isAvailable()&&t?.State&&t.State.history?t.State.history.some(a=>a.title===e):!1}static getVisitCount(e){const t=this.getSugarCubeObject();return this.isAvailable()&&t?.State&&t.State.history?t.State.history.filter(a=>a.title===e).length:0}static goBack(){const e=this.getSugarCubeObject();return this.isAvailable()&&e?.Engine?(e.Engine.backward(),!0):(console.warn("SugarCube Engine not available"),!1)}static restart(){const e=this.getSugarCubeObject();return this.isAvailable()&&e?.Engine?(e.Engine.restart(),!0):(console.warn("SugarCube Engine not available"),!1)}static whenReady(e,t=5e3){if(this.isAvailable()){e();return}const a=()=>{document.removeEventListener("sugarcube-ready",a),e()};document.addEventListener("sugarcube-ready",a),setTimeout(()=>{document.removeEventListener("sugarcube-ready",a),this.isAvailable()||console.warn("SugarCube did not become available within timeout")},t)}static getStoryInfo(){const e=this.getSugarCubeObject();return this.isAvailable()&&e?.Story?{title:e.Story.title,id:e.Story.id}:null}static passageExists(e){const t=this.getSugarCubeObject();return this.isAvailable()&&t?.Story?t.Story.has(e):!1}static getSugarCube(){return this.getSugarCubeObject()}}const i=(n,e)=>{setTimeout(()=>{const t=document.getElementById(e);t&&(t.classList.remove("opacity-0"),setTimeout(()=>{t.classList.add("opacity-0"),setTimeout(()=>{c.whenReady(()=>{c.goToPassage(n)})},6e3)},8e3))},500)},T=()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen().catch(n=>{console.error(`Error attempting to enable full-screen mode: ${n.message} (${n.name})`)})},D=()=>{setTimeout(()=>{document.getElementById("fullscreen-button")?.addEventListener("click",T)},0)},E=n=>{setTimeout(()=>{console.log("Starting loading animation");const e=document.getElementById("loading");e&&setTimeout(()=>{const t=e.querySelector("img"),a=e.querySelector("p");t&&t.classList.remove("opacity-0"),a&&a.classList.remove("opacity-0"),setTimeout(()=>{e&&(a&&a.classList.add("opacity-0"),t&&t.classList.add("opacity-0"),setTimeout(()=>{n&&n()},6e3))},6e3)},100)},100)},w=()=>{setTimeout(()=>{E(()=>{c.whenReady(()=>{c.goToPassage("MainMenu")})})},100)},p={Start:()=>{w()},MainMenu:()=>{D()},Day0:()=>{i("KitchenDay0","day-0")},Day0ChangeScene:()=>{i("HouseDay0-0","day-0-change")},Day0EnterHouse:()=>{i("InsideHouseDay0-0","day-0-enter")},Day0Dead:()=>{i("Day0DeadScreen","day-0-dead")},Day1:()=>{i("Day1Bathroom","day-1")},Day1Dead:()=>{i("Day1DeadScreen","day-1-dead")},Day1DeadCasing:()=>{i("Day1DeadScreenCasing","day-1-dead-casing")},Day2AloneFinger:()=>{i("Day2AloneFingerStory","day-2-alone-finger")},Day2BackupFinger:()=>{i("Day2BackupFingerStory","day-2-backup-finger")},Day2AloneBlood:()=>{i("Day2AloneBloodStory","day-2-alone-blood")},Day2BackupBlood:()=>{i("Day2BackupBloodStory","day-2-backup-blood")},Day2Casing:()=>{i("Day2CasingStory","day-2-casing")}},A=n=>{const{name:e}=n.passage;p[e]&&p[e]()},L=(n,e)=>{if(!n)return;const t=n.innerHTML,a=n.textContent||n.innerText||"";n.innerHTML="";const s=document.createElement("span");s.style.fontFamily="inherit",s.style.fontSize="inherit",s.style.lineHeight="inherit",s.style.color="inherit";const d=document.createElement("span");d.className="cursor",n.appendChild(s),n.appendChild(d);let g=0;const C=25,u=document.createElement("div");u.innerHTML=t,u.style.display="none",document.body.appendChild(u);const m=()=>{if(g<a.length){g++;const f=u.cloneNode(!0);let o=g;const h=r=>{if(o<=0)return!1;if(r.nodeType===Node.TEXT_NODE){const l=r.textContent||"";return o>=l.length?(o-=l.length,!0):(r.textContent=l.substring(0,o),o=0,!1)}else if(r.nodeType===Node.ELEMENT_NODE){const l=Array.from(r.childNodes);for(const S of l)if(!h(S)){const y=Array.from(r.childNodes),v=y.indexOf(S);for(let b=v+1;b<y.length;b++)r.removeChild(y[b]);break}return o>0}return!0};h(f),requestAnimationFrame(()=>{s.innerHTML=f.innerHTML}),setTimeout(m,C)}else requestAnimationFrame(()=>{s.innerHTML=t,d.style.animation="none"}),document.body.removeChild(u),e&&e()};m()};window.setupTypingAnimation=L;const O=()=>{c.whenReady(()=>{c.restart()})};window.restartGame=O;setTimeout(()=>{if(typeof window<"u"&&window.jQuery){const n=window.$;n(document).on(":passagerender",A)}},0);
