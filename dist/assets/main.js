class l{static getSugarCubeObject(){return typeof window<"u"?window.SugarCube||window.SugarCubeAPI:null}static isAvailable(){const e=this.getSugarCubeObject();return e!=null&&e.Engine!==null}static goToPassage(e){const t=this.getSugarCubeObject();return this.isAvailable()&&t?.Engine?(t.Engine.play(e),!0):(console.warn("SugarCube Engine not available"),!1)}static getCurrentPassage(){const e=this.getSugarCubeObject();return this.isAvailable()&&e?.State?.active?e.State.active.title:null}static setVariable(e,t){const n=this.getSugarCubeObject();return this.isAvailable()&&n?.State?.variables?(n.State.variables[e]=t,!0):(console.warn("SugarCube State not available"),!1)}static getVariable(e,t){const n=this.getSugarCubeObject();return this.isAvailable()&&n?.State?.variables?n.State.variables[e]??t:t}static hasVisited(e){const t=this.getSugarCubeObject();return this.isAvailable()&&t?.State&&t.State.history?t.State.history.some(n=>n.title===e):!1}static getVisitCount(e){const t=this.getSugarCubeObject();return this.isAvailable()&&t?.State&&t.State.history?t.State.history.filter(n=>n.title===e).length:0}static goBack(){const e=this.getSugarCubeObject();return this.isAvailable()&&e?.Engine?(e.Engine.backward(),!0):(console.warn("SugarCube Engine not available"),!1)}static restart(){const e=this.getSugarCubeObject();return this.isAvailable()&&e?.Engine?(e.Engine.restart(),!0):(console.warn("SugarCube Engine not available"),!1)}static whenReady(e,t=5e3){if(this.isAvailable()){e();return}const n=()=>{document.removeEventListener("sugarcube-ready",n),e()};document.addEventListener("sugarcube-ready",n),setTimeout(()=>{document.removeEventListener("sugarcube-ready",n),this.isAvailable()||console.warn("SugarCube did not become available within timeout")},t)}static getStoryInfo(){const e=this.getSugarCubeObject();return this.isAvailable()&&e?.Story?{title:e.Story.title,id:e.Story.id}:null}static passageExists(e){const t=this.getSugarCubeObject();return this.isAvailable()&&t?.Story?t.Story.has(e):!1}static getSugarCube(){return this.getSugarCubeObject()}}const a=(i,e)=>{setTimeout(()=>{const t=document.getElementById(e);t&&(t.classList.remove("opacity-0"),setTimeout(()=>{t.classList.add("opacity-0"),setTimeout(()=>{l.whenReady(()=>{l.goToPassage(i)})},6e3)},8e3))},500)},D={Day0:()=>{a("KitchenDay0","day-0")},Day0ChangeScene:()=>{a("HouseDay0-0","day-0-change")},Day0EnterHouse:()=>{a("InsideHouseDay0-0","day-0-enter")},Day0Dead:()=>{a("Day0DeadScreen","day-0-dead")},Day1:()=>{a("Day1Bathroom","day-1")},Day1Dead:()=>{a("Day1DeadScreen","day-1-dead")},Day1DeadCasing:()=>{a("Day1DeadScreenCasing","day-1-dead-casing")},Day1CasingFake:()=>{a("Day1CasingFakeScreen","day-1-casing-fake")},Day2AloneFinger:()=>{a("Day2AloneFingerStory","day-2-alone-finger")},Day2BackupFinger:()=>{a("Day2BackupFingerStory","day-2-backup-finger")},Day2AloneBlood:()=>{a("Day2AloneBloodStory","day-2-alone-blood")},Day2BackupBlood:()=>{a("Day2BackupBloodStory","day-2-backup-blood")},Day2Casing:()=>{a("Day2CasingStory","day-2-casing")},Day2BackupFingerDead:()=>{a("Day2BackupFingerDeadScreen","day-2-backup-finger-dead")},Day3BloodAlone:()=>{a("Day3BloodAlone-0","day-3-blood-alone")},Day3BloodBackup:()=>{a("Day3BloodBackup-0","day-3-blood-backup")},Day3FingerAlone:()=>{a("Day3FingerAlone-0","day-3-finger-alone")},Day3FingerBackup:()=>{a("Day3FingerBackup-0","day-3-finger-backup")},Day3BloodBackupBackup:()=>{a("Day3BloodBackupBackup-0","day-3-blood-backup-backup")},Day3BloodBackupAlone:()=>{a("Day3BloodBackupAlone-0","day-3-blood-backup-alone")}},v=i=>{const{name:e}=i.passage;D[e]&&D[e]()},B=(i,e)=>{if(!i)return;const t=i.innerHTML,n=i.textContent||i.innerText||"";i.innerHTML="";const r=document.createElement("span");r.style.fontFamily="inherit",r.style.fontSize="inherit",r.style.lineHeight="inherit",r.style.color="inherit";const d=document.createElement("span");d.className="cursor",i.appendChild(r),i.appendChild(d);let y=0;const C=25,u=document.createElement("div");u.innerHTML=t,u.style.display="none",document.body.appendChild(u);const h=()=>{if(y<n.length){y++;const S=u.cloneNode(!0);let o=y;const p=s=>{if(o<=0)return!1;if(s.nodeType===Node.TEXT_NODE){const c=s.textContent||"";return o>=c.length?(o-=c.length,!0):(s.textContent=c.substring(0,o),o=0,!1)}else if(s.nodeType===Node.ELEMENT_NODE){const c=Array.from(s.childNodes);for(const f of c)if(!p(f)){const g=Array.from(s.childNodes),m=g.indexOf(f);for(let b=m+1;b<g.length;b++)s.removeChild(g[b]);break}return o>0}return!0};p(S),requestAnimationFrame(()=>{r.innerHTML=S.innerHTML}),setTimeout(h,C)}else requestAnimationFrame(()=>{r.innerHTML=t,d.style.animation="none"}),document.body.removeChild(u),e&&e()};h()};window.setupTypingAnimation=B;const A=()=>{l.whenReady(()=>{l.restart()})};window.restartGame=A;setTimeout(()=>{if(typeof window<"u"&&window.jQuery){const i=window.$;i(document).on(":passagerender",v)}},0);
